(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-yilininfovotedetails-yilininfovotedetails"],{"02e5":function(t,e,i){"use strict";var n=i("cb10"),a=i.n(n);a.a},"0589":function(t,e,i){"use strict";i.r(e);var n=i("c43a"),a=i("1ea0");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("02e5");var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"66b3ecbb",null,!1,n["a"],r);e["default"]=u.exports},"16dc":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.u-mask[data-v-97c7ea6a]{position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.u-mask-show[data-v-97c7ea6a]{opacity:1}.u-mask-zoom[data-v-97c7ea6a]{-webkit-transform:scale(1.2);transform:scale(1.2)}',""]),t.exports=e},"1ea0":function(t,e,i){"use strict";i.r(e);var n=i("2912"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"1f8b":function(t,e,i){"use strict";i.r(e);var n=i("a557"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},2912:function(t,e,i){"use strict";var n=i("4ea4");i("a9e3"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var a=n(i("1da1")),o={data:function(){return{pageShow:!0,playerId:0,votePlayer:{},player:null,enable:!0}},onLoad:function(){this.playerId=location.pathname.split("/").pop(),this.getPlayerInfo()},onShow:function(){this.enable=!0},onHide:function(){this.enable=!1},onUnload:function(){this.player&&this.player.dispose()},methods:{getAppid:function(t){var e=this;this.$u.api.getUserConfigInfo(t).then((function(t){if(0==t.code){var i=sessionStorage.getItem("authCode");e.$u.vuex("vuex_nowUrl",location.pathname),e.isWeixin()&&(void 0!=i&&null!=i&&""!=i||e.weChatAuth(t.userConfig.appid))}}))},getPlayerInfo:function(){var t=this;this.$u.api.getPlayerInfo(this.playerId).then((function(e){0==e.code&&(t.getVoteInfo(e.votePlayer.voteId),t.votePlayer=e.votePlayer,uni.setNavigationBarTitle({title:e.votePlayer.voteInfoName}),void 0!=e.votePlayer.voteVcr&&null!=e.votePlayer.voteVcr&&""!=e.votePlayer.voteVcr&&setTimeout((function(){t.liveVideo()}),100),t.pageShow=!1)}))},getVoteInfo:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$u.api.getVoteInfo(t);case 2:n=i.sent,0==n.code&&e.getAppid(n.vote.userId);case 4:case"end":return i.stop()}}),i)})))()},toList:function(){var t=getCurrentPages();t.length>0?uni.navigateBack():uni.navigateTo({url:"/vote/"+this.votePlayer.voteId})},liveVideo:function(){var t=document.createElement("video");t.id="video",t.style="width: 100%;height: 100%;",t.controls=!0,t.setAttribute("x5-video-player-type","h5"),t.setAttribute("x5-video-player-fullscreen","true"),t.setAttribute("webkit-playsinline","true"),t.setAttribute("x5-video-orientation","portraint"),t.setAttribute("playsinline","true"),this.$refs.video.$el.appendChild(t);var e=videojs("video");e.src(this.votePlayer.voteVcr),this.player=e,e.on("error",(function(){e.errorDisplay.close()}))},voteSubmit:function(){this.$u.api.setPoll({openid:this.vuex_userInfo.openid,headimgurl:this.vuex_userInfo.headimgurl,nickname:this.vuex_userInfo.nickname,votePlayerId:Number(this.playerId),voteId:this.votePlayer.voteId}).then((function(t){0==t.code?uni.showToast({title:"投票成功",mask:!0,icon:"success"}):uni.showToast({title:t.msg,mask:!0,icon:"error"})}))}}};e.default=o},2999:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-mask",class:{"u-mask-zoom":t.zoom,"u-mask-show":t.show},style:[t.maskStyle,t.zoomStyle],attrs:{"hover-stop-propagation":!0},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),function(){}.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.click.apply(void 0,arguments)}}},[t._t("default")],2)},o=[]},"345f":function(t,e,i){"use strict";var n=i("4ea4");i("a9e3"),i("b64b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5530")),o={name:"u-mask",props:{show:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:""},customStyle:{type:Object,default:function(){return{}}},zoom:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},maskClickAble:{type:Boolean,default:!0}},data:function(){return{zoomStyle:{transform:""},scale:"scale(1.2, 1.2)"}},watch:{show:function(t){t&&this.zoom?this.zoomStyle.transform="scale(1, 1)":!t&&this.zoom&&(this.zoomStyle.transform=this.scale)}},computed:{maskStyle:function(){var t={backgroundColor:"rgba(0, 0, 0, 0.6)"};return this.show?t.zIndex=this.zIndex?this.zIndex:this.$u.zIndex.mask:t.zIndex=-1,t.transition="all ".concat(this.duration/1e3,"s ease-in-out"),Object.keys(this.customStyle).length&&(t=(0,a.default)((0,a.default)({},t),this.customStyle)),t}},methods:{click:function(){this.maskClickAble&&this.$emit("click")}}};e.default=o},"391a":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{},[i("v-uni-view",{staticClass:"u-sticky-wrap",class:[t.elClass],style:{height:t.fixed?t.height+"px":"auto",backgroundColor:t.bgColor}},[i("v-uni-view",{staticClass:"u-sticky",style:{position:t.fixed?"fixed":"static",top:t.stickyTop+"px",left:t.left+"px",width:"auto"==t.width?"auto":t.width+"px",zIndex:t.uZIndex}},[t._t("default")],2)],1)],1)},o=[]},"3ba1":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.u-sticky[data-v-31e37409]{z-index:9999999999}',""]),t.exports=e},"3dbe":function(t,e,i){"use strict";i.r(e);var n=i("345f"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"8e80":function(t,e,i){"use strict";i.r(e);var n=i("391a"),a=i("1f8b");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("e3fb");var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"31e37409",null,!1,n["a"],r);e["default"]=u.exports},"9d19":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".back[data-v-66b3ecbb]{padding-left:.1rem;height:.4rem;line-height:.4rem;background-color:#fff}.name[data-v-66b3ecbb]{font-size:.18rem;padding-left:.1rem;font-weight:600;color:#2b85e4}.cover[data-v-66b3ecbb]{width:3.55rem;margin:.1rem 0 0 .1rem}.cover img[data-v-66b3ecbb]{width:100%}.wrap[data-v-66b3ecbb]{padding:0 .1rem}.title[data-v-66b3ecbb]{font-size:.16rem;color:#10aeff;height:.3rem;line-height:.3rem;margin-top:.2rem}.video-js[data-v-66b3ecbb]{width:100%;height:1.98rem}.vote-btn[data-v-66b3ecbb]{padding:.3rem .1rem}",""]),t.exports=e},a557:function(t,e,i){"use strict";i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"u-sticky",props:{offsetTop:{type:[Number,String],default:0},index:{type:[Number,String],default:""},enable:{type:Boolean,default:!0},h5NavHeight:{type:[Number,String],default:44},bgColor:{type:String,default:"#ffffff"},zIndex:{type:[Number,String],default:""}},data:function(){return{fixed:!1,height:"auto",stickyTop:0,elClass:this.$u.guid(),left:0,width:"auto"}},watch:{offsetTop:function(t){this.initObserver()},enable:function(t){0==t?(this.fixed=!1,this.disconnectObserver("contentObserver")):this.initObserver()}},computed:{uZIndex:function(){return this.zIndex?this.zIndex:this.$u.zIndex.sticky}},mounted:function(){this.initObserver()},methods:{initObserver:function(){var t=this;this.enable&&(this.stickyTop=0!=this.offsetTop?uni.upx2px(this.offsetTop)+this.h5NavHeight:this.h5NavHeight,this.disconnectObserver("contentObserver"),this.$uGetRect("."+this.elClass).then((function(e){t.height=e.height,t.left=e.left,t.width=e.width,t.$nextTick((function(){t.observeContent()}))})))},observeContent:function(){var t=this;this.disconnectObserver("contentObserver");var e=this.createIntersectionObserver({thresholds:[.95,.98,1]});e.relativeToViewport({top:-this.stickyTop}),e.observe("."+this.elClass,(function(e){t.enable&&t.setFixed(e.boundingClientRect.top)})),this.contentObserver=e},setFixed:function(t){var e=t<this.stickyTop;e?this.$emit("fixed",this.index):this.fixed&&this.$emit("unfixed",this.index),this.fixed=e},disconnectObserver:function(t){var e=this[t];e&&e.disconnect()}},beforeDestroy:function(){this.disconnectObserver("contentObserver")}};e.default=n},a8b1:function(t,e,i){"use strict";var n=i("c999"),a=i.n(n);a.a},ab09:function(t,e,i){var n=i("3ba1");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("2956b1f4",n,!0,{sourceMap:!1,shadowMode:!1})},b323:function(t,e,i){"use strict";i.r(e);var n=i("2999"),a=i("3dbe");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("a8b1");var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"97c7ea6a",null,!1,n["a"],r);e["default"]=u.exports},c43a:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uSticky:i("8e80").default,uIcon:i("39af").default,uParse:i("3d17").default,uButton:i("09d5").default,uMask:i("b323").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("u-sticky",{attrs:{"h5-nav-height":"0",enable:t.enable}},[i("v-uni-view",{staticClass:"back",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toList()}}},[i("u-icon",{attrs:{name:"arrow-left-double",label:"返回列表"}})],1)],1),i("v-uni-view",{staticClass:"name"},[t._v(t._s(t.votePlayer.id+"号 "+t.votePlayer.voteInfoName))]),i("v-uni-view",{staticClass:"cover"},[i("img",{attrs:{src:t.votePlayer.cover}})]),t.votePlayer.voteVcr?i("v-uni-view",{staticClass:"wrap"},[i("v-uni-view",{staticClass:"title"},[t._v("选手视频")]),i("v-uni-view",{ref:"video",staticClass:"video-js vjs-theme-forest"})],1):t._e(),i("v-uni-view",{staticClass:"wrap"},[i("v-uni-view",{staticClass:"title"},[t._v("介绍")]),i("u-parse",{attrs:{html:t.votePlayer.brief}})],1),i("v-uni-view",{staticClass:"vote-btn"},[i("u-button",{attrs:{ripple:!0,type:"success"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.voteSubmit()}}},[t._v("投票")])],1),i("u-mask",{attrs:{show:t.pageShow,"custom-style":{background:"#fff"}}})],1)},o=[]},c999:function(t,e,i){var n=i("16dc");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("2871403c",n,!0,{sourceMap:!1,shadowMode:!1})},cb10:function(t,e,i){var n=i("9d19");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("ea46a316",n,!0,{sourceMap:!1,shadowMode:!1})},e3fb:function(t,e,i){"use strict";var n=i("ab09"),a=i.n(n);a.a}}]);