(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-yilininfoarticle-yilininfoarticle"],{"21b1":function(e,t,i){"use strict";var a=i("4ea4");i("ac1f"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var n=a(i("1da1")),r={data:function(){return{articleId:0,article:{},articleReview:[],userInfo:{},praiseStatus:!1,reviewContent:"",commentStatus:!1}},watch:{commentStatus:function(){this.commentStatus||(this.reviewContent="")}},onLoad:function(){this.articleId=location.href.split("/").pop(),this.getArticleInfo(),this.wxShare()},methods:{wxShare:function(){var e=this;this.$u.api.getWxShare({url:location.href,userId:this.vuex_userId,typeId:6,keyId:this.articleId}).then((function(t){if(0==t.code){var i=t.data;e.wxConfig(i)}}))},getAppid:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$u.api.getUserConfigInfo(e);case 2:a=i.sent,0==a.code&&(n=sessionStorage.getItem("authCode"),t.$u.vuex("vuex_nowUrl",location.pathname),t.isWeixin()&&(void 0!=n&&null!=n&&""!=n||t.weChatAuth(a.userConfig.appid)),t.userInfo=a.userInfo);case 4:case"end":return i.stop()}}),i)})))()},getArticleInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$u.api.getArticleInfo(e.articleId);case 2:i=t.sent,0==i.code&&(e.getAppid(i.article.article.userId),uni.setNavigationBarTitle({title:i.article.title}),e.article=i.article.article,e.articleReview=i.article.articleReview,e.getArticlePraiseStatus());case 4:case"end":return t.stop()}}),t)})))()},getArticlePraiseStatus:function(){var e=this;this.$u.api.getArticlePraiseStatus({userKey:this.vuex_userInfo.openid,articleId:this.articleId}).then((function(t){0==t.code&&(e.praiseStatus=!0)}))},setArticlePraise:function(){var e=this;this.$u.api.setArticlePraise({userKey:this.vuex_userInfo.openid,articleId:this.articleId,headimgurl:"123",nickname:"123",authType:"1"}).then((function(t){0==t.code&&(e.praiseStatus=!0,e.article.praise++)}))},sendArticleReview:function(){var e=this;this.$u.api.sendArticleReview({articleId:this.articleId,reviewContent:this.reviewContent,userkey:this.vuex_userInfo.openid,headimgurl:this.vuex_userInfo.headimgurl,nickname:this.vuex_userInfo.nickname}).then((function(t){0==t.code?(e.$refs.tips.show({title:"留言成功"}),e.commentStatus=!1):e.$refs.tips.show({title:t.msg})}))}}};t.default=r},"37ce":function(e,t,i){"use strict";i.r(t);var a=i("21b1"),n=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},"4bd1":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a}));var a={uParse:i("3d17").default,uIcon:i("39af").default,uInput:i("3cb1").default,uButton:i("09d5").default,uAvatar:i("7069").default,uToast:i("e753").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"title"},[e._v(e._s(e.article.title))]),i("v-uni-view",{staticClass:"info"},[i("v-uni-text",{staticClass:"user"},[e._v(e._s(e.userInfo.name))]),i("v-uni-text",[e._v(e._s(this.gettime(e.article.releaseCtime,1)))])],1),i("v-uni-view",{staticClass:"wrap"},[i("u-parse",{attrs:{html:e.article.articleContent}})],1),i("v-uni-view",{staticClass:"operation"},[i("v-uni-view",{staticClass:"praise",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setArticlePraise()}}},[i("u-icon",{attrs:{name:e.praiseStatus?"thumb-up-fill":"thumb-up",label:e.article.praise}})],1)],1),1==e.article.reviewStatus?i("v-uni-view",{staticClass:"review"},[i("v-uni-view",{staticClass:"review-nav"},[i("v-uni-text",[e._v(e._s(e.commentStatus?"写留言":"留言"))]),i("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.commentStatus=!e.commentStatus}}},[e._v(e._s(e.commentStatus?"取消":"写留言"))])],1),e.commentStatus?i("v-uni-view",{staticClass:"input-comment"},[i("u-input",{attrs:{clearable:!1,focus:e.commentStatus,type:"textarea","custom-style":{background:"#fff",padding:".1rem",borderRadius:"5px"},height:"200"},model:{value:e.reviewContent,callback:function(t){e.reviewContent=t},expression:"reviewContent"}}),i("u-button",{attrs:{disabled:""==e.reviewContent,type:"success","custom-style":{marginTop:".1rem",border:"0"},size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendArticleReview()}}},[e._v("留言")])],1):e._e(),e._l(e.articleReview,(function(t,a){return i("v-uni-view",{key:a,staticClass:"review-item"},[i("v-uni-view",{staticClass:"headimg"},[i("u-avatar",{attrs:{src:t.headimgurl,mode:"square"}})],1),i("v-uni-view",{staticClass:"right-wrap"},[i("v-uni-view",{staticClass:"name"},[e._v(e._s(t.nickname))]),i("v-uni-view",{staticClass:"content"},[e._v(e._s(t.reviewContent))])],1)],1)}))],2):e._e()],1),i("u-toast",{ref:"tips"})],1)},r=[]},"71b6":function(e,t,i){"use strict";var a=i("a55c7"),n=i.n(a);n.a},a55c7:function(e,t,i){var a=i("ab97");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("272a3dc9",a,!0,{sourceMap:!1,shadowMode:!1})},ab97:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".title[data-v-3ba3e4a2]{width:100%;padding:.2rem .1rem;font-size:.2rem;font-weight:600;line-height:.3rem;text-align:justify}.info[data-v-3ba3e4a2]{padding:0 .1rem}.info .user[data-v-3ba3e4a2]{color:#000091;margin-right:.2rem}.wrap[data-v-3ba3e4a2]{padding:.3rem .1rem}.operation[data-v-3ba3e4a2]{text-align:right;padding:.1rem}.praise[data-v-3ba3e4a2]{display:inline-block}.review[data-v-3ba3e4a2]{background-color:#eaeaea;padding:.2rem .1rem}.review-nav[data-v-3ba3e4a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:.3rem}.review-nav uni-text[data-v-3ba3e4a2]:nth-child(1){color:#919191}.review-nav uni-text[data-v-3ba3e4a2]:nth-child(2){color:#00009f}.input-comment[data-v-3ba3e4a2]{text-align:right}.review-item[data-v-3ba3e4a2]{display:-webkit-box;display:-webkit-flex;display:flex;padding:.2rem 0}.review-item .right-wrap[data-v-3ba3e4a2]{padding-left:.1rem}.right-wrap .name[data-v-3ba3e4a2]{color:#999}.right-wrap .content[data-v-3ba3e4a2]{font-size:.16rem}",""]),e.exports=t},e087:function(e,t,i){"use strict";i.r(t);var a=i("4bd1"),n=i("37ce");for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("71b6");var s,u=i("f0c5"),c=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,"3ba3e4a2",null,!1,a["a"],s);t["default"]=c.exports}}]);